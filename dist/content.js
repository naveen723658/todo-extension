(()=>{window.addEventListener("message",(e=>{if(e.source===window)if("SYNC_TODOS"===e.data.type)try{chrome.runtime.sendMessage({message:"SYNC_TODOS",todos:e.data.todos})}catch(e){console.error("Failed to send message to the background script:",e)}else if("DELETE_TODO"===e.data.type)try{chrome.runtime.sendMessage({message:"DELETE_TODO",todoText:e.data.todoText})}catch(e){console.error("Failed to send delete message to the background script:",e)}})),chrome.runtime.onMessage.addListener((e=>{"SYNC_TODOS"===e.message&&window.postMessage({type:"FROM_EXTENSION",todos:e.todos},"*")}));try{chrome.runtime.sendMessage({message:"GET_TODOS"},(e=>{e.todos&&window.postMessage({type:"FROM_EXTENSION",todos:e.todos},"*")}))}catch(e){console.error("Failed to retrieve todos from the background script:",e)}})();